(this.webpackJsonpkoshelek_test=this.webpackJsonpkoshelek_test||[]).push([[5],{70:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return d}));var a=function(e){return{type:"DATA_LOADED",payload:e}},r=function(){return{type:"DATA_REQUESTED"}},o=function(){return{type:"DATA_ERROR"}},i=function(e){return{type:"SET_CURRENT_SYMBOL",payload:e}},c=function(e){return{type:"UPDATE_DIFF",payload:e}},d=function(e){return{type:"ADD_DIFFS_TO_DATA",payload:e}}},72:function(e,t,n){},93:function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(t);var o=n(15),i=n(20),c=n(22),d=n(21),l=n(0),s=n.n(l),u=n(1),m=n(2),h=n(4),b=n.n(h),f=n(6),p=s.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.className,r=e.striped,o=e.bordered,i=e.borderless,c=e.hover,d=e.size,l=e.variant,h=e.responsive,p=Object(m.a)(e,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]),E=Object(f.a)(n,"table"),v=b()(a,E,l&&E+"-"+l,d&&E+"-"+d,r&&E+"-striped",o&&E+"-bordered",i&&E+"-borderless",c&&E+"-hover"),y=s.a.createElement("table",Object(u.a)({},p,{className:v,ref:t}));if(h){var W=E+"-responsive";return"string"===typeof h&&(W=W+"-"+h),s.a.createElement("div",{className:W},y)}return y})),E=(n(72),n(40),n(39)),v=function(){return function(e){return function(t){return s.a.createElement(E.a.Consumer,null,(function(n){return s.a.createElement(e,Object.assign({},t,{SDK:n}))}))}}},y=n(70),W=n(34),T=function(){return s.a.createElement("div",{className:"spinner"},"loading...")},S=n(42),g=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).state={tableHeight:document.documentElement.clientHeight-30*document.documentElement.clientHeight/100,tableBodyHeight:"90%",tableThWidth:document.documentElement.clientWidth/6,tableTdWidth:document.documentElement.clientWidth/6,tableFiveTdWidth:document.documentElement.clientWidth/6,tableSixTdWidth:document.documentElement.clientWidth/6,mobile:!1,colspan:3},a.props.snapshotRequested();var i=a.props,c=i.SDK,d=i.currentSymbol;return a.updates=c.subscribeToUpdates("/ws/".concat(a.props.currentSymbol.toLowerCase(),"@depth")),c.getSnapshot("/api/v1/depth?symbol=".concat(d,"&limit=500")).then((function(e){return a.props.snapshotLoaded(e)})).catch((function(e){return a.props.snapshotError()})),a.updates.onmessage=function(e){var t=JSON.parse(e.data),n=t.a.filter((function(e){return 0!=e[1]})),o=t.b.filter((function(e){return 0!=e[1]})),i=a.props.dataItems,c=i.bids,l=i.asks;a.props.updateDiff({bidsDiff:o,asksDiff:n}),console.log("old  ",i);var s={bids:[].concat(r(o),r(c)),asks:[].concat(r(n),r(l))};a.props.addDiffsToData(s),console.log("new ".concat(d,"   "),s)},a}return Object(i.a)(n,[{key:"componentWillMount",value:function(){document.documentElement.clientWidth<=995?this.setState({mobile:!0,colspan:2,tableThWidth:document.documentElement.clientWidth/4,tableTdWidth:document.documentElement.clientWidth/4}):this.setState({mobile:!1,colspan:3,tableThWidth:document.documentElement.clientWidth/6,tableTdWidth:document.documentElement.clientWidth/6})}},{key:"componentWillUnmount",value:function(){this.updates.close(1e3,"the work is done")}},{key:"render",value:function(){var e=this,t=this.props,n=t.dataItems,a=t.loading,o=t.error,i=n.asks,c=n.bids;if(a)return s.a.createElement(T,null);var d=r(c);if(d.forEach((function(e,t){i[t]&&c[t]&&(d[t]=[].concat(r(d[t]),r(i[t])))})),o)return s.a.createElement(S.a,null);var l=this.state,u=l.mobile,m=l.colspan,h=l.tableThWidth,b=l.tableTdWidth,f=l.tableFiveTdWidth,E=l.tableSixTdWidth,v=l.tableHeight,y=l.tableBodyHeight;return s.a.createElement(s.a.Fragment,null,s.a.createElement(p,{height:v,className:"table",striped:!0,hover:!0},s.a.createElement("caption",null,this.props.currentSymbol),s.a.createElement("thead",{className:"table__header"},s.a.createElement("tr",{className:"table__title "},s.a.createElement("th",{colSpan:m},"Bids"),s.a.createElement("th",{colSpan:m},"Asks")),s.a.createElement("tr",null,s.a.createElement("th",{width:h},"Amount"),s.a.createElement("th",{width:h},"Price"),s.a.createElement("th",{width:h,className:"d-none d-lg-block"},"Total"),s.a.createElement("th",{width:h},"Amount"),s.a.createElement("th",{width:h},"Price"),s.a.createElement("th",{width:h,className:"d-none d-lg-block"},"Total"))),s.a.createElement("tbody",{height:y,className:"table__body",onMouseOver:function(){u?e.setState({tableFiveTdWidth:document.documentElement.clientWidth/4-17}):e.setState({tableFiveTdWidth:document.documentElement.clientWidth/6,tableSixTdWidth:document.documentElement.clientWidth/6-17})},onMouseOut:function(){u?e.setState({tableFiveTdWidth:document.documentElement.clientWidth/4,tableSixTdWidth:document.documentElement.clientWidth/4}):e.setState({tableFiveTdWidth:document.documentElement.clientWidth/6,tableSixTdWidth:document.documentElement.clientWidth/6})}},d.map((function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",{width:b},(+e[1]).toFixed(4)),s.a.createElement("td",{width:b},(+e[0]).toFixed(4)),s.a.createElement("td",{width:b,className:"d-none d-lg-block"},(e[0]*e[1]).toFixed(4)),s.a.createElement("td",{width:b},(+e[3]).toFixed(4)),s.a.createElement("td",{width:f},(+e[2]).toFixed(4)),s.a.createElement("td",{width:E,className:"d-none d-lg-block"},(e[2]*e[3]).toFixed(4)))})))))}}]),n}(l.Component),w={snapshotLoaded:y.d,snapshotRequested:y.e,snapshotError:y.c,updateDiff:y.f,addDiffsToData:y.a};t.default=v()(Object(W.b)((function(e){return{dataItems:e.data,currentSymbol:e.currentSymbol,loading:e.loading,error:e.error,diff:e.diff}}),w)(g))}}]);
//# sourceMappingURL=5.28271bc1.chunk.js.map